{% extends "base.html" %}

{% block aside %}
<h3>Categories
</h3>
<ul>
    <li><a href="{% url 'home' %}">All</a></li>
    {% for category in categories %}
    <li><a href="{% url 'home' %}?q={{category}}">{{category}}</a></li>
    {% endfor %}
</ul>
{% endblock aside %}

{% block main %}
<div>
    {% if request.user.is_authenticated %}
    <h2>Welcome {{request.user}}</h2>
    {% endif %}

</div>
<div class="row">
    <ul>
        {% if products %}
        {% for product in products %}
        <div class="col s12 m6 l4">
            <div class="card-panel">
                <h5><a href="{% url 'product-detail' product.id %}">{{product}}</a></h5>
                <a href="{% url 'product-detail' product.id %}"><img src="{{product.image.url}}" alt="" width="250px"
                        height="250px"></a>
                {% if product.stock > 0 %}
                <button data-product="{{product.id}}" data-action="add" class="update-cart">Add to cart</button>
                {% endif %}
            </div>
        </div>

        {% endfor %}
        {% else %}
        <p>No products found</p>
        {% endif %}

    </ul>
</div>
{% endblock main %}